package character;

import javax.swing.JFrame;

import SpriteSheet.SpriteSheet;
import objectSize.IsaacSize;
import objectSize.ViewDirect;
import objectSize.WormSize;

public class Worm extends Character {
	
	private Worm worm = this;
	private final static String GUBUN = "Worm : ";
	
	private Isaac isaac;
	private SpriteSheet ssBody;

	public Worm(JFrame app, Isaac isaac) {
		super(app);
		this.isaac = isaac;
		init();
		setting();
		batch();
		new Thread(new Runnable() {
			@Override
			public void run() {
				System.out.println("run");
				while(!isDead()) {
					if(isaac.getXChar() > getXChar()) {
						setRight(true);
					} else {
						setRight(false);
					}
					if(isaac.getXChar() < getXChar()) {
						setLeft(true);
					} else {
						setLeft(false);
					}
					moveRight();
					moveLeft();
					try {
						Thread.sleep(100);
					} catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
				}
			}
		}).start();
	}
	public void init() {
		ssBody = new SpriteSheet("monster/worm.png", "monster", 0, 0, WormSize.RLWIDTH, WormSize.RLHEIGHT);
	}
	public void setting() {
		setViewDirect(ViewDirect.RIGHT);
		setXChar(180);
		setYChar(130);	
		setLife(6);
		setAttackDamge(1);
	}
	public void batch() {
		ssBody.drawObject(getXChar(), getYChar());
		getApp().add(ssBody, 1);
	}
	@Override
	public void moveRight() {
		new Thread(new Runnable() {
			public void run() {
				if(isRight()) {
					setViewDirect(ViewDirect.RIGHT);
					setXChar(getXChar() + 1);
					ssBody.drawObject(getXChar(), getYChar());
					try {
						Thread.sleep(100);
					} catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
				}
			}
		}).start();
	}
	@Override
	public void moveLeft() {
		new Thread(new Runnable() {
			public void run() {
				if(isRight()) {
					setViewDirect(ViewDirect.LEFT);
					setXChar(getXChar() - 1);
					ssBody.drawObject(getXChar(), getYChar());
					try {
						Thread.sleep(100);
					} catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
				}
			}
		}).start();
	}
	@Override
	public void moveUp() {
		
	}
	@Override
	public void moveDown() {
		
	}
}
